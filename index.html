<!DOCTYPE html>

<html>
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    	<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<!-- Bootstrap CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
			crossorigin="anonymous"
		/>

		<title>인재상 테스트</title>
		<link rel="stylesheet" href="style.css" />
		
	    <meta property="og:image" content="https://user-images.githubusercontent.com/87307678/128153149-dbf7e3fd-89b4-4bd6-ba1b-0fc0caa6ea70.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
		
    
		<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-610a40e6b817beda"></script>

		
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-145482737-6');
    </script>
		
	</head>

	<body>
		<nav class="navbar navbar-expand-lg navbar-light nav-distance">
			<div class="container-fluid">
				<a class="navbar-brand" href="#">대학교 관상 테스트</a>
				<button
					class="navbar-toggler"
					type="button"
					data-bs-toggle="collapse"
					data-bs-target="#navbarSupportedContent"
					aria-controls="navbarSupportedContent"
					aria-expanded="false"
					aria-label="Toggle navigation"
				>
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">
						<li class="nav-item">
							<a class="nav-link active" aria-current="page" href="#">Home</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">Link</a>
						</li>
						<li class="nav-item dropdown">
							<a
								class="nav-link dropdown-toggle"
								href="#"
								id="navbarDropdown"
								role="button"
								data-bs-toggle="dropdown"
								aria-expanded="false"
							>
								Dropdown
							</a>
							<ul class="dropdown-menu" aria-labelledby="navbarDropdown">
								<li><a class="dropdown-item" href="#">Action</a></li>
								<li><a class="dropdown-item" href="#">Another action</a></li>
								<li><hr class="dropdown-divider" /></li>
								<li><a class="dropdown-item" href="#">Something else here</a></li>
							</ul>
						</li>
						<li class="nav-item">
							<a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true"
								>Disabled</a
							>
						</li>
					</ul>
					<form class="d-flex">
						<input
							class="form-control me-2"
							type="search"
							placeholder="Search"
							aria-label="Search"
						/>
						<button class="btn btn-outline-success" type="submit">Search</button>
					</form>
				</div>
			</div>
		</nav>
		<section class="section">
			<h1 class="title">인공지능 대학상 예측</h1>
			<h2 class="pt-5 subtitle">내가 받게될 대학합격서는?</h2>
		</section>
		<!-- <section class="youtube">
			<div class="youtube-cover d-flex flex-row-reverse"><img src="img/image.jpg" alt="" class="youtube-icon"><a href="" class="youtube-link">영빈 인스타그램</a></div>
		</section> -->

		<script
			class="jsbin"
			src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"
		></script>

		<div class="mt-3 container file-upload">
	
			<div class="image-upload-wrap">
				<input
					class="file-upload-input"
					type="file"
					onchange="readURL(this);"
					accept="image/*"
				/>
				<div class="drag-text">
					<img src="img/student (1).svg" class="mt-5 pt-5 upload" style="width: 30%" ; />
					<h3 class="mb-5 pb-5 upload-text">
						학생증 사진을 올려놓거나 눌러서 업로드하세요!
					</h3>
				</div>
			</div>
			<div class="file-upload-content">
				<img class="file-upload-image" id="face-image" src="#" alt="your image" />
	            <div id="loading" class="animated bounce">
                <div class="spinner-border" role="status">
                    <span class="sr-only"></span>
                </div>
                <p class="text-center">AI가 당신의 인재상을 분석중입니다.</p>
            </div>
				<p class="result-message">
					
				</p>
            <div id="label-container" class="d-flex flex-column justify-content-around"></div>
                <!-- Go to www.addthis.com/dashboard to customize your tools -->
                <div class="addthis_inline_share_toolbox"></div>
				
				<div class="pt-3 image-title-wrap">
					
	                <button type="button p-2" class="try-again-btn" onclick="gaReload1();" data-toggle="modal" data-target="#adModal">
                    <span class="try-again-text">다른 사진으로 재시도</span>
                	</button>
				</div>
			</div>
		</div>
		<div class="ad-banner">
			<ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-eqpkbBOLnRhpLDwT" 
 data-ad-width   = "320" 
 data-ad-height  = "100"></ins> 
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
		</div>
		<div class="ad-banner2">
			<ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-h5zJ5c5iZpz4Q55J" 
 data-ad-width   = "300" 
 data-ad-height  = "250"></ins> 
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
		</div>
		<footer class="footer pt-5 container d-flex justify-content-center">
			<div>
				<p>
					&copy; youngbin coding Challenge
				</p>
			</div>
		</footer>

		<div id="webcam-container"></div>
		<div id="label-container"></div>
		<div id="disqus_thread"></div>
	    <div class="modal fade" id="adModal" tabindex="-1" role="dialog" aria-labelledby="adModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="adModalLabel">(AD)광고 - 재시도를 한번 더 눌러주세요.</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body d-flex justify-content-center">
                    <ins class="kakao_ad_area" style="display:none;" 
 data-ad-unit    = "DAN-t89oh3sc0ew5" 
 data-ad-width   = "300" 
 data-ad-height  = "250"></ins>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button type="button p-2" class="try-again-btn" onclick="gaReload2();">
                        <span class="try-again-text">다른 사진으로 재시도</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script>
        function gaReload1() {
            gtag('event', '다른 사진으로 재시도 1차', {
                'event_category': '다른 사진으로 재시도'
            });
        }
        function gaReload2() {
            gtag('event', '다른 사진으로 재시도 2차', {
                'event_category': '다른 사진으로 재시도'
            });
            window.location.reload();
        }
    </script>
		<!-- <script>
			/**
			 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
			/*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
			(function () {
				// DON'T EDIT BELOW THIS LINE
				var d = document,
					s = d.createElement('script');
				s.src = 'https://university-03.disqus.com/embed.js';
				s.setAttribute('data-timestamp', +new Date());
				(d.head || d.body).appendChild(s);
			})();
		</script> -->
		<!-- <noscript
			>Please enable JavaScript to view the
			<a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript
		> -->
		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->

		<script
			src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
			integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
			integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
			crossorigin="anonymous"
		></script>
		<script
			src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
			integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
			crossorigin="anonymous"
		></script>
		<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
		<script>
			function readURL(input) {
				if (input.files && input.files[0]) {
					var reader = new FileReader();

	                reader.onload = function(e) {
                    $('.image-upload-wrap').hide();
                    $('#loading').show();
                    $('.file-upload-image').attr('src', e.target.result);
                    $('.file-upload-content').show();
                    $('.image-title').html(input.files[0].name);
                };

					reader.readAsDataURL(input.files[0]);
					init().then(function() {
                    	console.log("hello");
                    	predict();
                    	$('#loading').hide();
					});
					//predict();
				} else {
					removeUpload();
				}
			}

			function removeUpload() {
				$('.file-upload-input').replaceWith($('.file-upload-input').clone());
				$('.file-upload-content').hide();
				$('.image-upload-wrap').show();
			}
			$('.image-upload-wrap').bind('dragover', function () {
				$('.image-upload-wrap').addClass('image-dropping');
			});
			$('.image-upload-wrap').bind('dragleave', function () {
				$('.image-upload-wrap').removeClass('image-dropping');
			});
		</script>
		<script type="text/javascript">
			// More API functions here:
			// https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

			// the link to your model provided by Teachable Machine export panel
			const URL = 'https://teachablemachine.withgoogle.com/models/OjVr0xisL/';

			let model, webcam, labelContainer, maxPredictions;

			// Load the image model and setup the webcam
			async function init() {
				const modelURL = URL + 'model.json';
				const metadataURL = URL + 'metadata.json';

				// load the model and metadata
				// Refer to tmImage.loadFromFiles() in the API to support files from a file picker
				// or files from your local hard drive
				// Note: the pose library adds "tmImage" object to your window (window.tmImage)
				model = await tmImage.load(modelURL, metadataURL);
				maxPredictions = model.getTotalClasses();
				labelContainer = document.getElementById('label-container');
				for (let i = 0; i < maxPredictions; i++) {
					// and class labels
					labelContainer.appendChild(document.createElement('div'));
				}
			}

			// run the webcam image through the image model
			async function predict() {
				// predict can take in an image, video or canvas html element
				var image = document.getElementById('face-image');
				const prediction = await model.predict(image, false);
				prediction.sort((a,b)=> parseFloat(b.probability)-parseFloat(a.probability));
				console.log(prediction[0].className);
				var resultMessege;
				var resultTitle, resultExplain;
		 		var barWidth;
				
				switch (prediction[0].className) {
                    case "포항공과대학교":
                        resultTitle = "\"학문적 재능과 열정을 가진 과학공학계 글로벌 리더\""
                        resultExplain = "당신은 포스텍(POSTECH)이 필요로하는 인재입니다. 포스텍은 우리나라와 인류사회 발전에 절실히 필요한 과학과 기술의 심오한 이론과 광범위한 응용방법을 깊이 있게 연구하고, 소수의 영재를 모아 질 높은 교육을 실시함으로써 지식과 지성을 겸비한 국제적 수준의 고급인재를 양성함과 아울러, 산·학·연 협동의 구체적인 실현을 통하여 연구한 결과를 산업체에 전파함으로써 사회와 인류에 봉사할 목적으로 설립되었습니다."
						
                        break;
                    case "KAIST":
                        resultTitle = "\"지식 탐구를 즐기며, 새로운 분야를 개척하는 열정과 도전 의지를 지닌 학생\""
                       // resultTitle = "당신은 KAIST의 인재상입니다!"
						resultExplain = "당신은 KAIST가 필요로하는 인재입니다. 카이스트는 인류의 행복과 번영을 위한 과학기술혁신 대학의 비전을 가지고있습니다. 특징으로는 실용적 학문의 전통이 강하고, 전반적으로 수평적인 분위기 속에서 혁신적인 기술들을 창조해나간다. 또한 전 학부생에게 전액 장학금을 지급하는 파격적인 장학 혜택제공으로 수업료 부담이 없는것이 특징입니다."

                        break;
                    case "고려대학교":
                        resultTitle = "\"기본에 충실한 창의융합형 인재\""
                        resultExplain = "당신은 고려대학교가 필요로하는 인재입니다. "
                        break;
                    case "부산대학교":
                        resultTitle = "\"개방적이며 창조적 지식과 정보를 창출하여 국가를 위해 봉사하는 전문인\""
                        resultExplain = "당신은 부산대학교가 필요로하는 인재입니다. "

                        break;
                    case "서울대학교":
                        resultTitle = "\"창의역량과 의지와 탈경계형 통합적 지성을 가진 착한인재\""
                        resultExplain = "당신은 서울대학교가 필요로하는 인재입니다."
                        
                        break;
					case "성균관대학교":
                        resultTitle = "\"사회문제해결의 새로운가치를 창조하는 글로벌 창조혁신리더\""
                        resultExplain = "당신은 성균관대학교가 필요로하는 인재입니다."
                        
                        break;
					case "연세대학교":
                        resultTitle = "\"진리와 자유의 정신을 갖춘 글로벌 리더\""
                        resultExplain = "당신은 연세대학교가 필요로하는 인재입니다."
                        
                        break;
					case "이화여자대학교":
                        resultTitle = " \"폭넓은 교양지식과 목적의식을 가지고 미래를 개척해나가는 실천적 인재\""
                        resultExplain = "당신은 이화여자대학교가 필요로하는 인재입니다."
                        
                        break;
					case "중앙대학교":
                        resultTitle = "\"자신의 전공학문의 지식을 겸비하고 사회에 응용할 수 있는 인재\""
                        resultExplain = "당신은 중앙대학교가 필요로하는 인재입니다."
                        
                        break;
					case "한양대학교":
                        resultTitle = "\"지역사회와 국가, 나아가 인류사회의 번영에 공헌하는 인재\""
                        resultExplain = "당신은 한양대학교가 필요로하는 인재입니다."
                        
                        break;
					case "유학파":
                        resultTitle = " \"성취동기가 강하고 문제해결 능력이 높은 외국형 천재\""
                        resultExplain = "당신은 한국이 담을수 없는 세계적인재입니다."
                        
                        break;
                    default:
                        resultTitle = "\"측정오류\""
                        resultExplain = "당신의 잠재력을 측정할 수 없습니다."
                        // resultCeleb = ""
                        // gtag('event', '남자 결과 알수없음', {'event_category': '남자 결과'});
                }
			var title = "<div class='" + prediction[0].className + "-animal-title'>" + resultTitle + "</div>"
            var explain = "<div class='animal-explain pt-2'>" + resultExplain + "</div>"
            
            $('.result-message').html(title + explain);	
				
            for (let i = 0; i < 4; i++) {
                if (prediction[i].probability.toFixed(2) > 0.1) {
                    barWidth = Math.round(prediction[i].probability.toFixed(2) * 100) + "%";
                } else if (prediction[i].probability.toFixed(2) >= 0.01) {
                    barWidth = "4%"
                } else {
                    barWidth = "2%"
                }
				switch(prediction[i].className) {
					case "서울대학교":
						resultMessege = "서울대학교"
						break;
					case "고려대학교":
						resultMessege = "고려대학교"
						break;
					case "연세대학교":
						resultMessege = "연세대학교"
						break;
					case "성균관대학교":
						resultMessege = "성균관대학교"
						break;
					case "KAIST":
						resultMessege = "KAIST"
						break;
					case "포항공과대학교":
						resultMessege = "포항공과대학교"
						break;
					case "한양대학교":
						resultMessege = "한양대학교"
						break;
					case "중앙대학교":
						resultMessege = "중앙대학교"
						break;
					case "부산대학교":
						resultMessege = "부산대학교"
						break;
					case "유학파":
						resultMessege = "유학파"
						break;
					case "이화여자대학교":
						resultMessege = "이화여자대학교"
						break;
					default: 
						resultMessege = "측정오류"
				}		
                var label = "<div class='animal-label d-flex align-items-center'>" + resultMessege + "</div>"
                var bar = "<div class='bar-container position-relative container'><div class='" + prediction[i].className + "-box'></div><div class='d-flex justify-content-center align-items-center " + prediction[i].className + "-bar' style='width: " + barWidth + "'><span class='d-block percent-text'>" + Math.round(prediction[i].probability.toFixed(2) * 100) + "%</span></div></div>"
                labelContainer.childNodes[i].innerHTML = label + bar;
				}
			}
		</script>
	</body>

	<!-- Copyright (c) 2021 by Aaron Vanston (https://codepen.io/aaronvanston/pen/yNYOXR)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. -->
</html>
